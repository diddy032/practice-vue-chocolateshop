(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61ddc22e"],{"267d":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"site-section"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 mb-5 mb-md-0 mx-auto text-dark"},[a("h2",{staticClass:"h3 mb-3 text-black"},[t._v("購買人資訊")]),a("div",{staticClass:"p-3 p-lg-5 border",on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[a("div",{staticClass:"form-group font-weight-bold"},[a("label",{attrs:{for:"useremail"}},[t._v("信箱 *必填")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email",required:""},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),t.errors.has("email")?a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))]):t._e()]),a("div",{staticClass:"form-group font-weight-bold"},[a("label",{attrs:{for:"username"}},[t._v("收件人姓名 *必填")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t.errors.has("name")?a("span",{staticClass:"text-danger"},[t._v("姓名必須輸入")]):t._e()]),a("div",{staticClass:"form-group font-weight-bold"},[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話 *必填")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"},{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("usertel")},attrs:{type:"tel",name:"usertel",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),t.errors.has("usertel")?a("span",{staticClass:"text-danger"},[t._v("電話必須輸入")]):t._e()]),a("div",{staticClass:"form-group font-weight-bold"},[a("label",{attrs:{for:"useraddress"}},[t._v("收件人地址 *必填")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),t.errors.has("address")?a("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"text-black",attrs:{for:"comment"}},[t._v("備註:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"c_order_notes",id:"comment",cols:"30",rows:"5",placeholder:"給我們訂單訊息或注意事項"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})])])]),a("div",{staticClass:"col-md-6 mx-auto"},[a("div",{staticClass:"row mb-5"},[a("div",{staticClass:"col-md-12"},[a("h2",{staticClass:"h3 mb-3 text-black"},[t._v("訂單明細")]),a("div",{staticClass:"p-3 p-lg-5 border"},[a("table",{staticClass:"table site-block-order-table mb-5"},[t._m(0),a("tbody",t._l(t.cart.carts,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-primary font-weight-normal"},[t._v(" "+t._s(e.product.title)+" "),e.coupon?a("div",{staticClass:"text-success"},[t._v(" 已套用優惠券 ")]):a("div",{staticClass:"text-secondary"},[t._v(" 未套用優惠券 ")])]),a("td",{staticClass:"text-primary font-weight-normal"},[a("strong",{staticClass:"mx-2 my-auto"},[t._v("x")]),t._v(" "+t._s(e.qty)+" ")]),a("td",{staticClass:"text-primary text-right font-weight-normal"},[t._v(" "+t._s(t._f("currency")(e.total))+" "),a("div",{staticClass:"text-danger text-right font-weight-normal"},[t._v(" -"+t._s(t._f("currency")(e.total-e.final_total))+" ")])])])})),0)]),t.couponShow?a("div",{staticClass:"mb-5"},[a("div",{staticClass:"h5 text-dark font-weight-bold"},[t._v(" 已使用的優惠券 ")]),a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("small",{staticClass:"text-muted font-weight-bold text-primary"},[t._v("優惠券名")]),a("div",{staticClass:"h6 text-left font-weight-bold text-primary"},[t._v(t._s(t.Coupon.title))])]),a("div",{staticClass:"d-flex justify-content-between"},[a("small",{staticClass:"text-muted font-weight-bold text-primary"},[t._v("折扣碼")]),a("div",{staticClass:"h6 text-left font-weight-bold text-primary"},[t._v(t._s(t.Coupon.code))])]),a("div",{staticClass:"d-flex justify-content-between"},[a("small",{staticClass:"text-muted font-weight-bold text-primary"},[t._v("折扣%")]),a("div",{staticClass:"h6 text-left font-weight-bold text-primary"},[t._v(t._s(t.Coupon.percent)+"%")])])]):t._e(),a("table",{staticClass:"table mb-5"},[a("tbody",[t.cart.total!==t.cart.final_total?a("tr",[t._m(1),a("td",{staticClass:"text-black text-right font-weight-normal"},[t._v(t._s(t._f("currency")(t.cart.total)))])]):t._e(),t.cart.total!==t.cart.final_total?a("tr",{staticClass:"text-danger"},[t._m(2),a("td",{staticClass:"text-danger text-right font-weight-normal"},[t._v("-"+t._s(t._f("currency")(t.cart.total-t.cart.final_total)))])]):t._e(),a("tr",[t._m(3),a("td",{staticClass:"text-black text-right font-weight-bold"},[a("strong",[t._v(t._s(t._f("currency")(t.cart.final_total)))])])])])]),a("button",{staticClass:"btn btn-primary btn-lg py-3 btn-block",attrs:{type:"button"},on:{click:t.createOrder}},[t._v("確認訂單")])])])])])])])])],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("產品名稱")]),a("th",[t._v("數量")]),a("th",{staticClass:"text-right"},[t._v("價格")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"text-black font-weight-bold"},[a("strong",[t._v("購買總金額")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"font-weight-bold text-danger"},[a("strong",[t._v("優惠券折抵")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"text-black font-weight-bold"},[a("strong",[t._v("訂單金額")])])}],o=(a("99af"),{data:function(){return{cart:[],Coupon:{},form:{user:{name:"",email:"",tel:"",address:""},message:""},isLoading:!1,couponShow:!1}},methods:{getCart:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("gwul3vu02","/cart"),e=this;e.isLoading=!0,e.$http.get(t).then((function(t){e.isLoading=!1,e.cart=t.data.data,0===e.cart.total&&(e.$router.push("/home"),e.$bus.$emit("message:push","該頁面目前禁止訪問","danger")),e.cart.final_total!==e.cart.total?(e.Coupon=e.cart.carts[0].coupon,e.couponShow=!0):(e.Coupon={},e.couponShow=!1)}))},createOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("gwul3vu02","/order"),a=this,s=a.form;this.$validator.validate().then((function(r){r?t.$http.post(e,{data:s}).then((function(t){t.data.success&&(a.$bus.$emit("message:push",t.data.message,"success"),a.$router.push("/thankyou/".concat(t.data.orderId)))})):a.$bus.$emit("message:push","欄位不完整","danger")}))}},created:function(){this.getCart()}}),i=o,n=a("2877"),l=Object(n["a"])(i,s,r,!1,null,null,null);e["default"]=l.exports},8418:function(t,e,a){"use strict";var s=a("c04e"),r=a("9bf2"),o=a("5c6c");t.exports=function(t,e,a){var i=s(e);i in t?r.f(t,i,o(0,a)):t[i]=a}},"99af":function(t,e,a){"use strict";var s=a("23e7"),r=a("d039"),o=a("e8b5"),i=a("861d"),n=a("7b0b"),l=a("50c4"),c=a("8418"),d=a("65f0"),u=a("1dde"),m=a("b622"),v=a("2d00"),f=m("isConcatSpreadable"),p=9007199254740991,h="Maximum allowed index exceeded",g=v>=51||!r((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),_=u("concat"),b=function(t){if(!i(t))return!1;var e=t[f];return void 0!==e?!!e:o(t)},x=!g||!_;s({target:"Array",proto:!0,forced:x},{concat:function(t){var e,a,s,r,o,i=n(this),u=d(i,0),m=0;for(e=-1,s=arguments.length;e<s;e++)if(o=-1===e?i:arguments[e],b(o)){if(r=l(o.length),m+r>p)throw TypeError(h);for(a=0;a<r;a++,m++)a in o&&c(u,m,o[a])}else{if(m>=p)throw TypeError(h);c(u,m++,o)}return u.length=m,u}})}}]);
//# sourceMappingURL=chunk-61ddc22e.993819fb.js.map