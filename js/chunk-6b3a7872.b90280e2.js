(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b3a7872"],{"608a":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading,loader:t.LoadingAtt.loader,color:t.LoadingAtt.color},on:{"update:active":function(a){t.isLoading=a}}}),t._m(0),e("div",{staticClass:"d-none d-lg-block d-xl-block"},[e("table",{staticClass:"table mt-4 text-dark"},[t._m(1),t._l(t.orders,(function(a,s){return e("tbody",{key:s},[e("tr",[e("td",[t._v(t._s(t._f("formatDate")(a.create_at)))]),e("td",[t._v(t._s(a.user.email))]),e("td",t._l(a.products,(function(a,s){return e("ul",{key:s},[e("li",[t._v(t._s(t._f("filterId")(a.product_id,t.Allproducts))+"×"+t._s(a.qty))])])})),0),e("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("currency")(a.total))+" ")]),e("td",{staticClass:"text-center"},[a.is_paid?e("span",{staticClass:"text-success"},[t._v("已付款")]):e("span",{staticClass:"text-danger"},[t._v("尚未付款")])]),e("td",{staticClass:"text-center"},[e("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(e){return t.openModal(a)}}},[t._v("詳情")])])])])}))],2)]),e("div",{staticClass:"container mt-4 d-lg-none d-xl-none text-dark"},[e("div",{staticClass:"row"},t._l(t.orders,(function(a,s){return e("div",{key:s,staticClass:"col-12 col-sm-6 col-md-8 border mx-auto"},[e("div",{staticClass:"h6"},[e("div",{staticClass:"font-weight-bold"},[t._v("購買時間：")]),t._v(" "+t._s(t._f("formatDate")(a.create_at))+" "),e("div",{staticClass:"font-weight-bold mt-1"},[t._v("訂單編號：")]),t._v(" "+t._s(a.id)+" ")]),e("div",{staticClass:"d-flex justify-content-around"},[a.is_paid?e("span",{staticClass:"text-success"},[t._v("已付款")]):e("span",{staticClass:"text-danger"},[t._v("尚未付款")]),e("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(e){return t.openModal(a)}}},[t._v("詳情")])])])})),0)]),e("Pagination",{staticClass:"mb-2",attrs:{pages:t.AllPagination},on:{changeCurrentPage:t.getOrders}}),e("div",{staticClass:"modal fade",attrs:{id:"orderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(2),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12"},[e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("div",{staticClass:"h5 text-dark"},[t._v("訂單資訊")]),e("div",{staticClass:"form-group"},[e("div",{staticClass:"h6 text-dark"},[t._v("訂單成立日期："+t._s(t._f("formatDate")(t.tempOrder.create_at)))]),e("div",{staticClass:"h6 text-dark"},[t._v("訂單編號："+t._s(t.tempOrder.id))]),e("hr"),e("div",{staticClass:"h6 text-dark"},[t._v(" 是否付款： "),t.tempOrder.is_paid?e("span",{staticClass:"text-success"},[t._v("已付款")]):e("span",{staticClass:"text-danger"},[t._v("尚未付款")])]),t.tempOrder.is_paid?e("div",{staticClass:"h6 text-dark"},[t._v("付款日期："+t._s(t._f("formatDate")(t.tempOrder.paid_date)))]):t._e(),e("hr"),e("div",{staticClass:"h6 text-dark"},[t._v("購買項目：")]),t._l(t.tempOrder.products,(function(a,s){return e("ul",{key:s,staticClass:"text-dark font-weight-bold"},[e("li",[t._v(t._s(t._f("filterId")(a.product_id,t.Allproducts))+"×"+t._s(a.qty))])])})),e("div",{staticClass:"h6 text-dark font-weight-bold"},[t._v("總金額："+t._s(t._f("currency")(t.tempOrder.total)))])],2)]),e("div",{staticClass:"form-group col-md-6"},[e("div",{staticClass:"h5 text-dark"},[t._v("購買者資訊")]),e("div",{staticClass:"h6 text-dark"},[t._v("姓名："+t._s(t.tempOrder.user.name))]),e("div",{staticClass:"h6 text-dark"},[t._v("電話："+t._s(t.tempOrder.user.tel))]),e("div",{staticClass:"h6 text-dark"},[t._v("信箱："+t._s(t.tempOrder.user.email))]),e("div",{staticClass:"form-group h6 text-dark"},[e("label",{attrs:{for:"category"}},[t._v("地址：")]),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.tempOrder.user.address,expression:"tempOrder.user.address",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"category",placeholder:"請輸入分類"},domProps:{value:t.tempOrder.user.address},on:{input:function(a){a.target.composing||t.$set(t.tempOrder.user,"address",a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}})]),e("hr"),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"message"}},[t._v("留言：")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.message,expression:"tempOrder.message"}],staticClass:"form-control",attrs:{type:"text",id:"message",placeholder:"留言："},domProps:{value:t.tempOrder.message},on:{input:function(a){a.target.composing||t.$set(t.tempOrder,"message",a.target.value)}}})])])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:t.updateOrder}},[t._v("確認")])])])])])],1)},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mt-3"},[e("div",{staticClass:"h2"},[t._v("訂單列表")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{width:"200"}},[t._v("購買時間")]),e("th",[t._v("Email")]),e("th",[t._v("購買款項")]),e("th",{attrs:{width:"100"}},[t._v("應付金額")]),e("th",{attrs:{width:"100"}},[t._v("是否付款")]),e("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("編輯")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header bg-dark text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("span",[t._v("訂單詳情")])]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],i=(e("99af"),e("4de4"),e("a96d")),n={components:{Pagination:i["a"]},data:function(){return{orders:[],Allproducts:[],AllPagination:{},tempOrder:{user:{}},isLoading:!1,tempTime:"",LoadingAtt:{loader:"bars",color:"#7971ea"}}},methods:{getOrders:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("gwul3vu02","/admin/orders?page=").concat(t),e=this;e.isLoading=!0,e.$http.get(a).then((function(t){e.orders=t.data.orders.reverse().filter((function(t,a,e){return void 0!==t.id})),e.AllPagination=t.data.pagination,e.isLoading=!1}))},getProducts:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("gwul3vu02","/admin/products/all"),a=this;a.isLoading=!0,a.$http.get(t).then((function(t){a.Allproducts=t.data.products,a.isLoading=!1}))},openModal:function(t){$("#orderModal").modal("show"),this.tempOrder=Object.assign({},t)},updateOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("gwul3vu02","/admin/order/").concat(t.tempOrder.id);t.$http.put(a).then((function(a){t.$bus.$emit("message:push",a.data.message,"success"),$("#orderModal").modal("hide"),t.getOrders()}))}},created:function(){this.getOrders(),this.getProducts()}},o=n,d=e("2877"),c=Object(d["a"])(o,s,r,!1,null,null,null);a["default"]=c.exports},8418:function(t,a,e){"use strict";var s=e("c04e"),r=e("9bf2"),i=e("5c6c");t.exports=function(t,a,e){var n=s(a);n in t?r.f(t,n,i(0,e)):t[n]=e}},"99af":function(t,a,e){"use strict";var s=e("23e7"),r=e("d039"),i=e("e8b5"),n=e("861d"),o=e("7b0b"),d=e("50c4"),c=e("8418"),l=e("65f0"),u=e("1dde"),p=e("b622"),v=e("2d00"),m=p("isConcatSpreadable"),g=9007199254740991,_="Maximum allowed index exceeded",f=v>=51||!r((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),h=u("concat"),C=function(t){if(!n(t))return!1;var a=t[m];return void 0!==a?!!a:i(t)},b=!f||!h;s({target:"Array",proto:!0,forced:b},{concat:function(t){var a,e,s,r,i,n=o(this),u=l(n,0),p=0;for(a=-1,s=arguments.length;a<s;a++)if(i=-1===a?n:arguments[a],C(i)){if(r=d(i.length),p+r>g)throw TypeError(_);for(e=0;e<r;e++,p++)e in i&&c(u,p,i[e])}else{if(p>=g)throw TypeError(_);c(u,p++,i)}return u.length=p,u}})},a96d:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"row my-3"},[e("div",{staticClass:"col-md-12 text-center"},[e("div",{staticClass:"site-block-27",attrs:{"aria-label":"Page navigation"}},[e("ul",{staticClass:"pagination font-weight-bold justify-content-center"},[e("li",{staticClass:"page-item mr-2",class:{disabled:!t.pages.has_pre}},[e("a",{staticClass:"page-link",on:{click:function(a){return a.preventDefault(),t.changePagination(t.pages.current_page-1)}}},[t._v("<")])]),t._l(t.pages.total_pages,(function(a){return e("li",{key:a,staticClass:"page-item",class:{active:t.pages.current_page===a},on:{click:function(e){return e.preventDefault(),t.changePagination(a)}}},[e("a",{staticClass:"page-link"},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item ml-2",class:{disabled:!t.pages.has_next}},[e("a",{staticClass:"page-link",on:{click:function(a){return a.preventDefault(),t.changePagination(t.pages.current_page+1)}}},[t._v(">")])])],2)])])])])},r=[],i={name:"pages",props:{pages:{type:Object}},methods:{changePagination:function(t){this.$emit("changeCurrentPage",t),window.scrollTo(0,0)}}},n=i,o=(e("b01d"),e("2877")),d=Object(o["a"])(n,s,r,!1,null,"21284d31",null);a["a"]=d.exports},ab94:function(t,a,e){},b01d:function(t,a,e){"use strict";var s=e("ab94"),r=e.n(s);r.a}}]);
//# sourceMappingURL=chunk-6b3a7872.b90280e2.js.map